#!/usr/bin/gnuplot -p
# Generated by BenfWaves - http://code.google.com/p/benfwaves
# Tested on gnuplot 4.4

reset

# Profile variables

originalFile = 'Serialized\Manual.xml.test.m';
fileNumber   = 'S003';
firmware     = 'V3.40';

voltageDiv   = 1;
attenuation  = 1;
vsens        = 0.0022;
vdiffMax     = 8;
rin          = 546000;

timeDiv      = 0.0002;
timeRange    = 0.032784;
sampleCount  = 4098;
firstIndex   = 1418;
samplingFreq = sampleCount / timeRange;
sampPerDiv   = samplingFreq * timeDiv;
divRange     = timeRange / timeDiv;
fastSampMode = 'Disabled';

triggerIndex = 1420;
triggerKind  = 'EdgeRising';
triggerMode  = 'NORM';
triggerLevel = 3.76;
triggerSens  = 0.2;
triggerLow   = triggerLevel - triggerSens;
triggerHigh  = triggerLevel + triggerSens;


# Plot data

set title 'DSO Nano Waveform: '.fileNumber
set xlabel 'Time (relative to trigger)'
set ylabel 'Voltage'
set grid
set style line 1 linetype 1 linecolor rgb 'blue' linewidth 2 # Solid
set style line 2 linetype 0 linecolor rgb 'red'  linewidth 2 # Dotted

if (triggerSens == 0) plot                             \
    triggerLevel title 'trig'  with lines linestyle 2; \
else plot                                              \
    triggerLow   title 'trig-' with lines linestyle 2, \
    triggerHigh  title 'trig+' with lines linestyle 2;

replot '-' using ((column(0) + firstIndex - triggerIndex)/samplingFreq):1 \
                 title ''      with lines linestyle 1;
-0.04
-0.04
5.28
5.2
5.16
end
